{"version":3,"sources":["../src/Collisions.js"],"names":["tempAABB","tempAABB2","Collisions","x","y","collisionMap","CIRCLE","RECTANGLE","rectangleVrectangle","LINE","lineVline","rectangleVline","circleVline","contacts","body1","body2","bounds","globalBounds","bounds2","aabbVaabb","i","shapes","length","shape1","j","shape2","type","aabb1","aabb2","lower1","lower","upper1","upper","lower2","upper2","rect1","rect2","line1","line2","rectangle","line","circle"],"mappings":";;;;;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;;;;;AAEA,IAAMA,WAAW,oBAAjB;AACA,IAAMC,YAAY,oBAAlB;;IAEqBC,U;AAEjB;;;;;;AAMA,wBAAYC,CAAZ,EAAeC,CAAf,EACA;AAAA;;AACI,aAAKC,YAAL,GAAoB,EAApB;;AAEA;;AAEA,aAAK,gBAAMC,MAAN,GAAe,gBAAMA,MAA1B;AACA,aAAK,gBAAMC,SAAN,GAAkB,gBAAMA,SAA7B,IAA0C,KAAKC,mBAA/C;AACA,aAAK,gBAAMC,IAAN,GAAa,gBAAMA,IAAxB,IAAgC,KAAKC,SAArC;AACA,aAAK,gBAAMH,SAAN,GAAkB,gBAAMD,MAA7B;AACA,aAAK,gBAAMC,SAAN,GAAkB,gBAAME,IAA7B,IAAqC,KAAKE,cAA1C;AACA,aAAK,gBAAML,MAAN,GAAe,gBAAMG,IAA1B,IAAkC,KAAKG,WAAvC;;AAGA,aAAKC,QAAL,GAAgB,EAAhB;AACH;;;;gCAEOC,K,EAAOC,K,EACf;AACI,gBAAMC,SAASF,MAAMG,YAAN,CAAmBjB,QAAnB,CAAf;AACA,gBAAMkB,UAAUH,MAAME,YAAN,CAAmBhB,SAAnB,CAAhB;;AAEA,gBAAG,KAAKkB,SAAL,CAAeH,MAAf,EAAuBE,OAAvB,CAAH,EACA;AACI;AACA;;AAEA,qBAAK,IAAIE,IAAI,CAAb,EAAgBA,IAAIN,MAAMO,MAAN,CAAaC,MAAjC,EAAyCF,GAAzC,EACA;AACI,wBAAMG,SAAST,MAAMO,MAAN,CAAaD,CAAb,CAAf;;AAEA,yBAAK,IAAII,IAAI,CAAb,EAAgBA,IAAIT,MAAMM,MAAN,CAAaC,MAAjC,EAAyCE,GAAzC,EACA;AACI,4BAAMC,SAASV,MAAMM,MAAN,CAAaG,CAAb,CAAf;;AAEA,4BAAGD,OAAOG,IAAP,GAAcD,OAAOC,IAAxB,EACA;AACI,iCAAKH,OAAOG,IAAP,GAAcD,OAAOC,IAA1B,EACIZ,KADJ,EAEIS,MAFJ,EAGIR,KAHJ,EAIIU,MAJJ;AAMH,yBARD,MAUA;AACI,iCAAKA,OAAOC,IAAP,GAAcH,OAAOG,IAA1B,EACIX,KADJ,EAEIU,MAFJ,EAGIX,KAHJ,EAIIS,MAJJ;AAMH;AACJ;AACJ;AACJ,aAjCD,MAmCA,CAEC;AAEJ;;;kCAGSI,K,EAAOC,K,EACjB;AACI,gBAAMC,SAASF,MAAMG,KAArB;AACA,gBAAMC,SAASJ,MAAMK,KAArB;AACA,gBAAMC,SAASL,MAAME,KAArB;AACA,gBAAMI,SAASN,MAAMI,KAArB;;AAEA,mBAAO,CAAEC,OAAO9B,CAAP,IAAY4B,OAAO5B,CAAnB,IAAwB4B,OAAO5B,CAAP,IAAY+B,OAAO/B,CAA5C,IAAmD0B,OAAO1B,CAAP,IAAY+B,OAAO/B,CAAnB,IAAwB+B,OAAO/B,CAAP,IAAY4B,OAAO5B,CAA/F,MACE8B,OAAO7B,CAAP,IAAY2B,OAAO3B,CAAnB,IAAwB2B,OAAO3B,CAAP,IAAY8B,OAAO9B,CAA5C,IAAmDyB,OAAOzB,CAAP,IAAY8B,OAAO9B,CAAnB,IAAwB8B,OAAO9B,CAAP,IAAY2B,OAAO3B,CAD/F,CAAP;AAEH;;;4CAEmB+B,K,EAAOC,K,EAC3B,CAEC;;;kCAESC,K,EAAOC,K,EACjB,CAEC;;;uCAEcC,S,EAAWC,I,EAC1B,CAEC;;;oCAEWC,M,EAAQD,I,EACpB,CAEC;;;;;;kBArGgBtC,U","file":"Collisions.js","sourcesContent":["\nimport AABB from './AABB';\nimport Vector from './Vector';\nimport Shape from './shapes/Shape';\n\nimport circleVcircle from './collision/circleVcircle';\nimport rectangleVcircle from './collision/rectangleVcircle';\n\nconst tempAABB = new AABB();\nconst tempAABB2 = new AABB();\n\nexport default class Collisions\n{\n    /*\n     * @class Vector\n     * @constructor\n     * @param x {Number} position of the point\n     * @param y {Number} position of the point\n     */\n    constructor(x, y)\n    {\n        this.collisionMap = {};\n\n        //(object2.UID << 12) + object1.UID;\n\n        this[Shape.CIRCLE | Shape.CIRCLE] = circleVcircle;\n        this[Shape.RECTANGLE | Shape.RECTANGLE] = this.rectangleVrectangle;\n        this[Shape.LINE | Shape.LINE] = this.lineVline;\n        this[Shape.RECTANGLE | Shape.CIRCLE] = rectangleVcircle;\n        this[Shape.RECTANGLE | Shape.LINE] = this.rectangleVline;\n        this[Shape.CIRCLE | Shape.LINE] = this.circleVline;\n\n\n        this.contacts = [];\n    }\n\n    collide(body1, body2)\n    {\n        const bounds = body1.globalBounds(tempAABB)\n        const bounds2 = body2.globalBounds(tempAABB2)\n\n        if(this.aabbVaabb(bounds, bounds2))\n        {\n            // hit test\n            // bounding boxes have collided\n\n            for (var i = 0; i < body1.shapes.length; i++)\n            {\n                const shape1 = body1.shapes[i];\n\n                for (var j = 0; j < body2.shapes.length; j++)\n                {\n                    const shape2 = body2.shapes[j];\n\n                    if(shape1.type < shape2.type)\n                    {\n                        this[shape1.type | shape2.type](\n                            body1,\n                            shape1,\n                            body2,\n                            shape2\n                        );\n                    }\n                    else\n                    {\n                        this[shape2.type | shape1.type](\n                            body2,\n                            shape2,\n                            body1,\n                            shape1\n                        );\n                    }\n                }\n            }\n        }\n        else\n        {\n\n        }\n\n    }\n\n\n    aabbVaabb(aabb1, aabb2)\n    {\n        const lower1 = aabb1.lower;\n        const upper1 = aabb1.upper;\n        const lower2 = aabb2.lower;\n        const upper2 = aabb2.upper;\n\n        return ((lower2.x <= upper1.x && upper1.x <= upper2.x) || (lower1.x <= upper2.x && upper2.x <= upper1.x)) &&\n               ((lower2.y <= upper1.y && upper1.y <= upper2.y) || (lower1.y <= upper2.y && upper2.y <= upper1.y));\n    }\n\n    rectangleVrectangle(rect1, rect2)\n    {\n\n    }\n\n    lineVline(line1, line2)\n    {\n\n    }\n\n    rectangleVline(rectangle, line)\n    {\n\n    }\n\n    circleVline(circle, line)\n    {\n\n    }\n}\n"]}